<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>tfg-congelador documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">tfg-congelador documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >AuthService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/shared/services/auth.service.ts</code>
        </p>





            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#auth" >auth</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#db" >db</a>
                            </li>
                            <li>
                                <a href="#nombre" >nombre</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#router" >router</a>
                            </li>
                            <li>
                                <a href="#usuarioData" >usuarioData</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#authInicioSes" >authInicioSes</a>
                            </li>
                            <li>
                                <a href="#cerrarSesion" >cerrarSesion</a>
                            </li>
                            <li>
                                <a href="#generaFamilia" >generaFamilia</a>
                            </li>
                            <li>
                                <a href="#getUsuarioActual" >getUsuarioActual</a>
                            </li>
                            <li>
                                <a href="#googleAuth" >googleAuth</a>
                            </li>
                            <li>
                                <a href="#inicioSesion" >inicioSesion</a>
                            </li>
                            <li>
                                <a href="#isLoogeado" >isLoogeado</a>
                            </li>
                            <li>
                                <a href="#registrarse" >registrarse</a>
                            </li>
                            <li>
                                <a href="#setUsuarioFirestore" >setUsuarioFirestore</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(auth: Auth, router: Router, db: Firestore)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="14" class="link-to-prism">src/app/shared/services/auth.service.ts:14</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>This function saves user data in local storage when the session starts and deletes it when it
ends.
is used for navigating between different views or components in an Angular application. It
provides methods for navigating to a specific route, navigating back to the previous route, and
navigating to a route with optional parameters.
database.</p>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>auth</td>
                                                  
                                                        <td>
                                                                    <code>Auth</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <ul>
<li>An instance of the Firebase Authentication service.</li>
</ul>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>router</td>
                                                  
                                                        <td>
                                                                    <code>Router</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <ul>
<li>The router parameter is an instance of the Angular Router service, which
is used for navigating between different views or components in an Angular application. It
provides methods for navigating to a specific route, navigating back to the previous route, and
navigating to a route with optional parameters.</li>
</ul>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>db</td>
                                                  
                                                        <td>
                                                                    <code>Firestore</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <ul>
<li>Firestore instance used to interact with the Firebase Cloud Firestore
database.</li>
</ul>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="authInicioSes"></a>
                    <span class="name">
                        <span ><b>authInicioSes</b></span>
                        <a href="#authInicioSes"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>authInicioSes(provider: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="127"
                            class="link-to-prism">src/app/shared/services/auth.service.ts:127</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This function handles the authentication process for a user logging in with a third-party provider
and sets the user&#39;s information in Firestore if they are a new user.
provider that the user wants to sign in with. It could be a Google provider, Facebook provider, or
any other supported provider. This parameter is passed to the &quot;authInicioSes&quot; function to initiate
the sign-in process with the specified</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>provider</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The &quot;provider&quot; parameter is an object that represents the authentication
provider that the user wants to sign in with. It could be a Google provider, Facebook provider, or
any other supported provider. This parameter is passed to the &quot;authInicioSes&quot; function to initiate
the sign-in process with the specified</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="cerrarSesion"></a>
                    <span class="name">
                        <span ><b>cerrarSesion</b></span>
                        <a href="#cerrarSesion"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>cerrarSesion()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="159"
                            class="link-to-prism">src/app/shared/services/auth.service.ts:159</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>The function logs the user out, removes their information from local storage, and navigates them
to the registration page.
out successfully. It also removes the user&#39;s information from the local storage and navigates to
the &#39;registro&#39; route using the Angular router.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        <p>The <code>cerrarSesion()</code> function is returning a Promise that resolves when the user signs
out successfully. It also removes the user&#39;s information from the local storage and navigates to
the &#39;registro&#39; route using the Angular router.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="generaFamilia"></a>
                    <span class="name">
                        <span ><b>generaFamilia</b></span>
                        <a href="#generaFamilia"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>generaFamilia(usuario: <a href="../classes/Usuario.html" target="_self">Usuario</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="182"
                            class="link-to-prism">src/app/shared/services/auth.service.ts:182</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This function generates a unique ID, creates a family object with a user added to it, formats the
objects for storage, and adds the user and family to a database.
information about a user.
has been successfully written to the database.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>usuario</td>
                                    <td>
                                                <code><a href="../classes/Usuario.html" target="_self" >Usuario</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The parameter &quot;usuario&quot; is an object of type &quot;Usuario&quot; which contains
information about a user.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        <p>the result of the <code>setDoc</code> function, which is a Promise that resolves when the document
has been successfully written to the database.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getUsuarioActual"></a>
                    <span class="name">
                        <span ><b>getUsuarioActual</b></span>
                        <a href="#getUsuarioActual"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getUsuarioActual()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="170"
                            class="link-to-prism">src/app/shared/services/auth.service.ts:170</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This function returns the current user data.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        <p>the value of the property <code>usuarioData</code> of the object that the function is a method of.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="googleAuth"></a>
                    <span class="name">
                        <span ><b>googleAuth</b></span>
                        <a href="#googleAuth"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>googleAuth()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="115"
                            class="link-to-prism">src/app/shared/services/auth.service.ts:115</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This function returns the result of starting a Google authentication session using the
GoogleAuthProvider.
function with a new instance of the <code>GoogleAuthProvider</code> class as its argument. The specific
return value of <code>authInicioSes()</code> is not shown in the code snippet provided.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        <p>The <code>googleAuth()</code> function is returning the result of calling the <code>authInicioSes()</code>
function with a new instance of the <code>GoogleAuthProvider</code> class as its argument. The specific
return value of <code>authInicioSes()</code> is not shown in the code snippet provided.</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="inicioSesion"></a>
                    <span class="name">
                        <span ><b>inicioSesion</b></span>
                        <a href="#inicioSesion"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>inicioSesion(email: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, password: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="67"
                            class="link-to-prism">src/app/shared/services/auth.service.ts:67</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This function logs in a user with their email and password and navigates them to the &quot;inicio&quot; page
if successful, or displays an error message if unsuccessful.
in.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>email</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>a string representing the email address of the user trying to sign in.</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>password</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>A string representing the password entered by the user trying to sign
in.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isLoogeado"></a>
                    <span class="name">
                        <span ><b>isLoogeado</b></span>
                        <a href="#isLoogeado"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>isLoogeado()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="103"
                            class="link-to-prism">src/app/shared/services/auth.service.ts:103</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="registrarse"></a>
                    <span class="name">
                        <span ><b>registrarse</b></span>
                        <a href="#registrarse"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>registrarse(email: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, password: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, nombre: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="86"
                            class="link-to-prism">src/app/shared/services/auth.service.ts:86</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This function registers a user with their email, password, and name, creates a user with Firebase
authentication, and sets the user&#39;s information in Firestore.
account.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>email</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>A string representing the email address of the user who wants to register.</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>password</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>A string representing the password that the user wants to use for their
account.</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>nombre</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>string variable representing the name of the user registering.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setUsuarioFirestore"></a>
                    <span class="name">
                        <span ><b>setUsuarioFirestore</b></span>
                        <a href="#setUsuarioFirestore"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>setUsuarioFirestore(user: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="147"
                            class="link-to-prism">src/app/shared/services/auth.service.ts:147</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>This function sets a user&#39;s information in Firestore and generates a family for the user.
Authentication. It contains information such as the user&#39;s unique ID (uid), display name, email,
and photo URL.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>user</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>The &quot;user&quot; parameter is an object that represents a user in Firebase
Authentication. It contains information such as the user&#39;s unique ID (uid), display name, email,
and photo URL.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="auth"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>auth</b></span>
                        <a href="#auth"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Auth</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>getAuth()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="28" class="link-to-prism">src/app/shared/services/auth.service.ts:28</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description">- An instance of the Firebase Authentication service.</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="db"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>db</b></span>
                        <a href="#db"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Firestore</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>getFirestore()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="30" class="link-to-prism">src/app/shared/services/auth.service.ts:30</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description">- Firestore instance used to interact with the Firebase Cloud Firestore
database.</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="nombre"></a>
                    <span class="name">
                        <span ><b>nombre</b></span>
                        <a href="#nombre"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="14" class="link-to-prism">src/app/shared/services/auth.service.ts:14</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="router"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>router</b></span>
                        <a href="#router"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Router</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="29" class="link-to-prism">src/app/shared/services/auth.service.ts:29</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description">- The router parameter is an instance of the Angular Router service, which
is used for navigating between different views or components in an Angular application. It
provides methods for navigating to a specific route, navigating back to the previous route, and
navigating to a route with optional parameters.</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="usuarioData"></a>
                    <span class="name">
                        <span ><b>usuarioData</b></span>
                        <a href="#usuarioData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="13" class="link-to-prism">src/app/shared/services/auth.service.ts:13</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { GoogleAuthProvider, createUserWithEmailAndPassword, Auth, getAuth, onAuthStateChanged, signInWithEmailAndPassword, signInWithPopup, getAdditionalUserInfo } from &#x27;@angular/fire/auth&#x27;;
import { DocumentData, Firestore, collection, doc, getDocs, getFirestore, query, setDoc, where } from &#x27;@angular/fire/firestore&#x27;;
import { Router } from &#x27;@angular/router&#x27;;
import { Usuario } from &#x27;../modelos/usuario&#x27;;
import { Familia } from &#x27;../modelos/familia&#x27;;
import { v4 as uuidv4 } from &#x27;uuid&#x27;;

@Injectable({
  providedIn: &#x27;root&#x27;
})
export class AuthService {
  usuarioData: any;
  nombre: any &#x3D; null;

/**
 * This function saves user data in local storage when the session starts and deletes it when it
 * ends.
 * @param {Auth} auth - An instance of the Firebase Authentication service.
 * @param {Router} router - The router parameter is an instance of the Angular Router service, which
 * is used for navigating between different views or components in an Angular application. It
 * provides methods for navigating to a specific route, navigating back to the previous route, and
 * navigating to a route with optional parameters.
 * @param {Firestore} db - Firestore instance used to interact with the Firebase Cloud Firestore
 * database.
 */
  constructor(
    public auth: Auth &#x3D; getAuth(),
    public router: Router,
    public db: Firestore &#x3D; getFirestore(),
  ) {
  
     /* User data saved in localstorage when login in and deletend when loging out.
     *  When the user status changes the user is redirected to the landing page.
     */
    onAuthStateChanged(auth, (usuario) &#x3D;&gt; {
      if (usuario) {
        this.usuarioData &#x3D; usuario;
        localStorage.setItem(&#x27;usuario&#x27;, JSON.stringify(this.usuarioData));
        JSON.parse(localStorage.getItem(&#x27;usuario&#x27;)!);

        localStorage.setItem(&#x27;username&#x27;, JSON.stringify(this.nombre));
        JSON.parse(localStorage.getItem(&#x27;username&#x27;)!);
      } else {
        this.usuarioData &#x3D; null;

        localStorage.setItem(&#x27;usuario&#x27;, &#x27;null&#x27;);
        JSON.parse(localStorage.getItem(&#x27;usuario&#x27;)!);

        localStorage.setItem(&#x27;username&#x27;, &#x27;null&#x27;);
        JSON.parse(localStorage.getItem(&#x27;username&#x27;)!);
      }

      //Se devuelve al inicio 
      this.router.navigate([&#x27;inicio&#x27;]);
    });
  }

  
  /**
   * This function logs in a user with their email and password and navigates them to the &quot;inicio&quot; page
   * if successful, or displays an error message if unsuccessful.
   * @param {string} email - a string representing the email address of the user trying to sign in.
   * @param {string} password - A string representing the password entered by the user trying to sign
   * in.
   */
  inicioSesion(email: string, password: string) {

    signInWithEmailAndPassword(this.auth, email, password)
      .then((userCredential) &#x3D;&gt; {
        this.router.navigate([&#x27;inicio&#x27;]);
      })
      .catch((error) &#x3D;&gt; {
        window.alert(error.message);
      });
  }

  /**
   * This function registers a user with their email, password, and name, creates a user with Firebase
   * authentication, and sets the user&#x27;s information in Firestore.
   * @param {string} email - A string representing the email address of the user who wants to register.
   * @param {string} password - A string representing the password that the user wants to use for their
   * account.
   * @param {string} nombre - string variable representing the name of the user registering.
   */
  registrarse(email: string, password: string, nombre: string) {
    createUserWithEmailAndPassword(this.auth, email, password)
      .then((userCredential) &#x3D;&gt; {
        /* Se envía el email de verificación*/
        //this.EnviarVerificacion();

        this.nombre &#x3D; nombre;
        this.setUsuarioFirestore(userCredential.user);
      })
      .catch((error) &#x3D;&gt; {
        window.alert(error.message);
      });
  }

  /* This function checks if the user is logged in and their email has been verified. It retrieves the
  user data from local storage, checks if it is not null and if the email verification status is not
  false, and returns true if both conditions are met, or false otherwise. */
  isLoogeado(): boolean {
    const user &#x3D; JSON.parse(localStorage.getItem(&#x27;usuario&#x27;)!);
    return user !&#x3D;&#x3D; null &amp;&amp; user.emailVerificado !&#x3D;&#x3D; false ? true : false;
  }

  /**
   * This function returns the result of starting a Google authentication session using the
   * GoogleAuthProvider.
   * @returns The &#x60;googleAuth()&#x60; function is returning the result of calling the &#x60;authInicioSes()&#x60;
   * function with a new instance of the &#x60;GoogleAuthProvider&#x60; class as its argument. The specific
   * return value of &#x60;authInicioSes()&#x60; is not shown in the code snippet provided.
   */
  googleAuth() {
    return this.authInicioSes(new GoogleAuthProvider())
  }

  /**
   * This function handles the authentication process for a user logging in with a third-party provider
   * and sets the user&#x27;s information in Firestore if they are a new user.
   * @param {any} provider - The &quot;provider&quot; parameter is an object that represents the authentication
   * provider that the user wants to sign in with. It could be a Google provider, Facebook provider, or
   * any other supported provider. This parameter is passed to the &quot;authInicioSes&quot; function to initiate
   * the sign-in process with the specified
   */
  authInicioSes(provider: any) {
    signInWithPopup(this.auth, provider)
      .then((result) &#x3D;&gt; {
        const isNewUser  &#x3D; getAdditionalUserInfo(result)?.isNewUser;
        if(isNewUser){
          console.log(isNewUser);
          this.setUsuarioFirestore(result.user);
        }
        this.router.navigate([&#x27;inicio&#x27;]);
      })
      .catch((error) &#x3D;&gt; {
        window.alert(error);
      });
  }
  /**
   * This function sets a user&#x27;s information in Firestore and generates a family for the user.
   * @param {any} user - The &quot;user&quot; parameter is an object that represents a user in Firebase
   * Authentication. It contains information such as the user&#x27;s unique ID (uid), display name, email,
   * and photo URL.
   */
  setUsuarioFirestore(user: any) {
    const datoUsuario: Usuario &#x3D; new Usuario(user.uid, user.displayName || this.nombre, user.email, user.photoURL);
    this.generaFamilia(datoUsuario);
  }

  /**
   * The function logs the user out, removes their information from local storage, and navigates them
   * to the registration page.
   * @returns The &#x60;cerrarSesion()&#x60; function is returning a Promise that resolves when the user signs
   * out successfully. It also removes the user&#x27;s information from the local storage and navigates to
   * the &#x27;registro&#x27; route using the Angular router.
   */
  cerrarSesion() {
    return this.auth.signOut().then(() &#x3D;&gt; {
      localStorage.removeItem(&#x27;usuario&#x27;);
      this.router.navigate([&#x27;registro&#x27;]);
    });
  }

  /**
   * This function returns the current user data.
   * @returns the value of the property &#x60;usuarioData&#x60; of the object that the function is a method of.
   */
  getUsuarioActual() {
    return this.usuarioData;
  }

  /**
   * This function generates a unique ID, creates a family object with a user added to it, formats the
   * objects for storage, and adds the user and family to a database.
   * @param {Usuario} usuario - The parameter &quot;usuario&quot; is an object of type &quot;Usuario&quot; which contains
   * information about a user.
   * @returns the result of the &#x60;setDoc&#x60; function, which is a Promise that resolves when the document
   * has been successfully written to the database.
   */
  generaFamilia(usuario: Usuario) {
    //Creación de id único
    let fId &#x3D; uuidv4();

    //Creación de familia añadiendo el usuario
    let familia &#x3D; new Familia(fId);
    usuario.setFamiliaID(fId);

    //Formato de los objetos para almacenarlos
    let usu &#x3D; Object.assign({}, usuario);
    let fam &#x3D; Object.assign({},familia);

    //Adición de usuario a la bd
    const usuarioaRef &#x3D; doc(this.db, &#x27;usuarios&#x27;, usuario.uid);
    setDoc(usuarioaRef, usu, { merge: true });

    //Adición de familia a la bd
    const familiaRef &#x3D; doc(this.db, &#x27;familias&#x27;, fId);
    return setDoc(familiaRef, fam, { merge: true });
  }

  /* //Enviar email de verificación
   EnviarVerificacion() {
     sendEmailVerification(auth.currentUser)
       .then((u: any) &#x3D;&gt; u.sendEmailVerification())
       .then(() &#x3D;&gt; {
         this.router.navigate([&#x27;verify-email-address&#x27;]);
       });
   }
   // Reset Forggot password
   ForgotPassword(passwordResetEmail: string) {
     return this.auth
       .sendPasswordResetEmail(passwordResetEmail)
       .then(() &#x3D;&gt; {
         window.alert(&#x27;Password reset email sent, check your inbox.&#x27;);
       })
       .catch((error) &#x3D;&gt; {
         window.alert(error);
       });
   }*/

}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'AuthService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
